/* ====== 亚克力效果 ======*/
$blur: calc(var(--blur) * 1px);

body.back-blur {
  &-menu {
    :is(.menu, .suggestion-container, .excalidraw .context-menu) {
      background-color: hsla(var(--background-secondary-hsl), 0.7);
      backdrop-filter: blur($blur);
    }

    .mod-search-suggestion .suggestion {
      background-color: transparent;
    }
  }

  &-title-bar {
    .workspace-leaf-content:not([data-type='excalidraw']) {
      .view-header {
        --background-primary: hsla(var(--background-primary-hsl), 0.9);
        backdrop-filter: blur($blur);
        position: absolute;
        z-index: 100;
        width: 100%;
        // margin-right: var(--size-4-3);
        padding-right: 0;
      }

      :is(.cm-scroller, .markdown-preview-view)::-webkit-scrollbar-track {
        margin-top: calc(var(--file-margins) + var(--size-4-3));
      }

      .cm-content {
        padding-top: 0;
      }
    }

    .view-content :is(.cm-scroller, .markdown-reading-view > .markdown-preview-view) {
      padding-top: calc(var(--file-margins) + var(--size-4-4));
    }

    .workspace-leaf-content[data-type='style-settings'] .view-content {
      padding-top: calc(var(--file-margins) + var(--size-4-8));

      &::-webkit-scrollbar-track {
        margin-top: calc(var(--file-margins) + var(--size-4-3));
      }
    }

    $vher: '.workspace-leaf-content:not([data-type="excalidraw"]) .view-header';

    .workspace-leaf.mod-active #{$vher} {
      --background-primary: hsla(var(--background-primary-hsl), 0.7);
    }

    &.tab-title-bar #{$vher} {
      --background-primary: hsla(var(--background-secondary-hsl), 0.9);

      .workspace-leaf.mod-active #{$vher} {
        --background-primary: hsla(var(--background-secondary-hsl), 0.7);
      }
    }
  }

  &-status-bar .status-bar {
    --stauts-bar-background-opacity: 0.4;
    backdrop-filter: blur($blur);
  }
}